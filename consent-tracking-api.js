!function(){"use strict";function n(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?n(Object(o),!0).forEach((function(n){e(t,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))}))}return t}function e(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}let r,o,c,i,u,C,s,E;!function(n){n.TRACKING_ACCEPTED="trackingConsentAccepted",n.TRACKING_DECLINED="trackingConsentDeclined",n.MARKETING_ACCEPTED="marketingConsentAccepted",n.STATISTICS_ACCEPTED="statisticsConsentAccepted",n.PREFERENCES_ACCEPTED="preferencesConsentAccepted",n.ATTRIBUTION_ACCEPTED="attributionConsentAccepted",n.MARKETING_DECLINED="marketingConsentDeclined",n.STATISTICS_DECLINED="statisticsConsentDeclined",n.PREFERENCES_DECLINED="preferencesConsentDeclined",n.ATTRIBUTION_DECLINED="attributionConsentDeclined",n.CONSENT_COLLECTED="visitorConsentCollected"}(r||(r={})),function(n){n.V2_0="2.0",n.V2_1="2.1"}(o||(o={})),function(n){n.ACCEPTED="yes",n.DECLINED="no",n.NO_INTERACTION="no_interaction",n.NO_VALUE=""}(c||(c={})),function(n){n.NO_VALUE="",n.ACCEPTED="1",n.DECLINED="0"}(i||(i={})),function(n){n.GDPR="GDPR",n.CCPA="CCPA",n.NO_VALUE=""}(u||(u={})),function(n){n.CCPA_BLOCK_ALL="CCPA_BLOCK_ALL",n.GDPR="GDPR",n.GDPR_BLOCK_ALL="GDPR_BLOCK_ALL",n.CCPA="CCPA"}(C||(C={})),function(n){n.MARKETING="m",n.STATISTICS="s",n.PREFERENCES="p",n.ATTRIBUTION="t"}(s||(s={})),function(n){n.MARKETING="marketing",n.STATISTICS="statistics",n.PREFERENCES="preferences",n.ATTRIBUTION="attribution"}(E||(E={}));const a=["lim","v","con","reg"];function f(n,t){const e=t.slice().sort();return n.length===t.length&&n.slice().sort().every((n,t)=>n===e[t])}function l(){const n=document.cookie?document.cookie.split("; "):[];let t=void 0;if(n.forEach(n=>{const[e,r]=n.split("=");if("_tracking_consent"===decodeURIComponent(e)){var o=JSON.parse(decodeURIComponent(r));t=o}}),void 0!==t&&!function(n){if(![o.V2_0,o.V2_1].includes(n.v))return!0;return!f(Object.keys(n),a)}(t))return t}function T(){try{let n=l();if(!n)return;return n.v===o.V2_0?function(n){const e=t(t({},n.con),{},{GDPR:N(n)?I(n.con.GDPR):void 0});void 0===e.GDPR&&delete e.GDPR;return{con:e,reg:n.reg,v:o.V2_1,lim:n.lim}}(n):n}catch(n){return}}function A(){const n=T();if(P(n))return I(i.NO_VALUE);const t=n.con;switch(typeof t.GDPR){case"undefined":return I(i.NO_VALUE);case"string":return I(t.GDPR);default:return t.GDPR}}function D(){const n=T();if(P(n))return i.NO_VALUE;const t=n.con.CCPA;return void 0===t?i.NO_VALUE:t}function P(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===n&&(n=T()),void 0===n}function I(n){return{[s.MARKETING]:n,[s.STATISTICS]:n,[s.PREFERENCES]:n,[s.ATTRIBUTION]:n}}function N(n){const t=[C.GDPR,C.GDPR_BLOCK_ALL];return n.lim.some(n=>t.includes(n))&&u.GDPR in n.con}const _={"":[],GDPR:[C.GDPR,C.GDPR_BLOCK_ALL],CCPA:[C.CCPA_BLOCK_ALL,C.CCPA]};function d(n,t){document.dispatchEvent(new CustomEvent(n,{detail:t||{}}))}function R(n){!0===n.marketing?d(r.MARKETING_ACCEPTED):d(r.MARKETING_DECLINED),!0===n.statistics?d(r.STATISTICS_ACCEPTED):d(r.STATISTICS_DECLINED),!0===n.preferences?d(r.PREFERENCES_ACCEPTED):d(r.PREFERENCES_DECLINED),!0===n.attribution?d(r.ATTRIBUTION_ACCEPTED):d(r.ATTRIBUTION_DECLINED),d(r.CONSENT_COLLECTED,n)}function L(n,t,e){const o=new XMLHttpRequest,c=JSON.stringify(n);o.open("POST","/set_tracking_consent.json",!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){if(4!==o.readyState)return;const c=function(n){try{return JSON.parse(n)}catch(n){return{error:"Unknown error"}}}(o.responseText);var i;0===(i=o.status)||200>=i&&i<400?(!function(n,t){void 0!==n.consent?(!0===n.consent?d(r.TRACKING_ACCEPTED):d(r.TRACKING_DECLINED),t&&R({marketing:n.consent,preferences:n.consent,statistics:n.consent,attribution:n.consent})):void 0!==n.granular_consent&&R(n.granular_consent)}(n,e),t(null,c)):t(c)},o.send(c)}function O(n,e){if(P()){const n="Shop is not configured to block privacy regulation in online store settings.";return console.warn(n),e({error:n})}if(function(n){if(X()){if("boolean"!=typeof n&&"object"!=typeof n)throw TypeError("setTrackingConsent must be called with a boolean or object consent value");if("object"==typeof n){const t=Object.values(E);if(!f(t,Object.keys(n)))throw TypeError("The submitted consent object should have exactly these keys: ".concat(t.join(", "),"."))}}else if("boolean"!=typeof n)throw TypeError("setTrackingConsent must be called with a boolean consent value")}(n),"function"!=typeof e)throw TypeError("setTrackingConsent must be called with a callback function");if("object"==typeof n){const r=h(n.statistics),o=m(n.statistics);return L(t(t({granular_consent:n},null!==r&&{referrer:r}),null!==o&&{landing_page:o}),e,X())}{const r=h(n),o=m(n);return L(t(t({consent:n},null!==r&&{referrer:r}),null!==o&&{landing_page:o}),e,X())}}function p(n,t){if("boolean"!=typeof n)throw TypeError("setCCPAConsent must be called with a boolean consent value");if("function"!=typeof t)throw TypeError("setCCPAConsent must be called with a callback function");return L({ccpa_consent:n},t,X())}function S(n){return P()?c.NO_VALUE:n===i.NO_VALUE?c.NO_INTERACTION:function(n){switch(n){case i.ACCEPTED:return c.ACCEPTED;case i.DECLINED:return c.DECLINED;default:return c.NO_VALUE}}(n)}function g(){if(P())return c.NO_VALUE;const n=A();return n[s.MARKETING]===i.ACCEPTED&&n[s.STATISTICS]===i.ACCEPTED?c.ACCEPTED:n[s.MARKETING]===i.DECLINED||n[s.STATISTICS]===i.DECLINED?c.DECLINED:c.NO_INTERACTION}function b(){const n=function(){const n=T();return P(n)?u.NO_VALUE:n.reg}();return n in u?n:u.NO_VALUE}function y(){return function(){const n=T();return P(n)?{limit:[]}:{limit:n.lim}}()}function h(n){return K(C.GDPR_BLOCK_ALL)&&n?G()?document.referrer:"":null}function m(n){return K(C.GDPR_BLOCK_ALL)&&n?G()?window.location.pathname+window.location.search:"/":null}function w(){return"string"==typeof navigator.globalPrivacyControl?"1"===navigator.globalPrivacyControl:Boolean(navigator.globalPrivacyControl)}function G(){if(""===document.referrer)return!0;const n=document.createElement("a");return n.href=document.referrer,window.location.hostname!=n.hostname}function v(){return K(C.GDPR)||K(C.GDPR_BLOCK_ALL)}function k(){const n=b();if(n===u.NO_VALUE)return!1;const t=y();return 0!==t.limit.length&&t.limit.some(t=>function(n,t){return _[n].includes(t)}(n,t))}function B(){return!!P()||function(){if(!v())return!0;const n=A();return n[s.MARKETING]===i.ACCEPTED&&n[s.STATISTICS]===i.ACCEPTED||n[s.MARKETING]!==i.DECLINED&&n[s.STATISTICS]!==i.DECLINED&&b()!==u.GDPR}()}function K(n){return y().limit.includes(n)}function U(){return!w()&&(!!P()||!1!==B()&&function(){if(K(C.CCPA_BLOCK_ALL)){return b()!==u.CCPA}if(K(C.CCPA)){return D()!==i.DECLINED}return!0}())}function j(){return b()===u.GDPR&&k()&&g()===c.NO_INTERACTION}function V(){return w()&&b()===u.CCPA?c.DECLINED:S(D())}function M(){return b()===u.CCPA&&y().limit.includes(C.CCPA)&&V()===c.NO_INTERACTION}function F(n){if(!v())return!0;const t=A();return t[n]===i.ACCEPTED||t[n]!==i.DECLINED&&b()!==u.GDPR}function J(){return F(s.STATISTICS)}function q(){return F(s.PREFERENCES)}function x(){return F(s.ATTRIBUTION)}function H(){return F(s.MARKETING)}function X(){return function(){const n=l();switch(null==n?void 0:n.v){case"2.0":return o.V2_0;case"2.1":return o.V2_1;default:return}}()===o.V2_1}function z(){b()===u.CCPA&&D()!=i.DECLINED&&K(C.CCPA)&&w()&&p(!1,()=>!1);const n={getTrackingConsent:g,setTrackingConsent:O,userCanBeTracked:B,getRegulation:b,isRegulationEnforced:k,getShopPrefs:y,shouldShowGDPRBanner:j,userDataCanBeSold:U,setCCPAConsent:p,getCCPAConsent:V,shouldShowCCPABanner:M};if(X()){const t={siteStatisticsCanBeCollected:J,preferencesCanBeStored:q,marketingCanBeAttributed:x,marketingProfileCanBeCreated:H};n.unstable=t}return n}window.Shopify=window.Shopify?window.Shopify:{},window.Shopify.customerPrivacy=window.Shopify.trackingConsent=z()}();
